t = int(input())

def result(t):
    global b

    for i in range(3):
        for j in range(3):
            print(b[i][3 + j], end = "")

        print()

    return

def move(cnt,cType):
    global b

    while cnt >0:
        if cType == "U":
            # 윗면
            tmp = b[2][3],b[1][3],b[0][3]
            b[2][3],b[1][3],b[0][3] = b[2][5],b[2][4],b[2][3]
            b[2][5], b[2][4], b[2][3] = b[0][5],b[1][5],b[2][5]
            b[0][5], b[1][5], b[2][5] = b[0][3],b[0][4],b[0][5]
            b[0][3], b[0][4], b[0][5] = tmp

            # 옆면
            tmp2 = b[3][2],b[3][1],b[3][0]
            b[3][2], b[3][1], b[3][0] = b[3][5],b[3][4],b[3][3]
            b[3][5], b[3][4], b[3][3] = b[3][8],b[3][7],b[3][6]
            b[3][8], b[3][7], b[3][6] = b[3][11],b[3][10],b[3][9]
            b[3][11], b[3][10], b[3][9] = tmp2

        elif cType == "D":

            tmp = b[8][3],b[7][3],b[6][3]
            b[8][3],b[7][3],b[6][3] = b[8][5],b[8][4],b[8][3]
            b[8][5], b[8][4], b[8][3] = b[6][5],b[7][5],b[8][5]
            b[6][5], b[7][5], b[8][5] = b[6][3],b[6][4],b[6][5]
            b[6][3],b[6][4],b[6][5] = tmp

            tmp2 = b[5][0],b[5][1],b[5][2]
            b[5][0], b[5][1], b[5][2] = b[5][9],b[5][10],b[5][11]
            b[5][9],b[5][10],b[5][11] = b[5][6],b[5][7],b[5][8]
            b[5][6],b[5][7],b[5][8] = b[5][3],b[5][4],b[5][5]
            b[5][3], b[5][4], b[5][5] = tmp2

        elif cType == "F":

            tmp = b[5][3], b[4][3], b[3][3]
            b[5][3], b[4][3], b[3][3] = b[5][5],b[5][4],b[5][3]
            b[5][5], b[5][4], b[5][3] = b[3][5],b[4][5],b[5][5]
            b[3][5], b[4][5], b[5][5] = b[3][3],b[3][4],b[3][5]
            b[3][3], b[3][4], b[3][5] = tmp

            tmp2 = b[5][2], b[4][2], b[3][2]
            b[5][2], b[4][2], b[3][2] = b[6][5],b[6][4],b[6][3]
            b[6][5], b[6][4], b[6][3] = b[3][6],b[4][6],b[5][6]
            b[3][6], b[4][6], b[5][6] = b[2][3],b[2][4],b[2][5]
            b[2][3], b[2][4], b[2][5] = tmp2

        elif cType == "B":

            tmp = b[5][9], b[4][9], b[3][9]
            b[5][9], b[4][9], b[3][9] = b[5][11],b[5][10],b[5][9]
            b[5][11],b[5][10],b[5][9] = b[3][11],b[4][11],b[5][11]
            b[3][11],b[4][11],b[5][11] = b[3][9],b[3][10],b[3][11]
            b[3][9],b[3][10],b[3][11] = tmp

            tmp2 = b[5][8], b[4][8], b[3][8]
            b[5][8], b[4][8], b[3][8] = b[8][3],b[8][4],b[8][5]
            b[8][3],b[8][4],b[8][5] = b[3][0], b[4][0], b[5][0]
            b[3][0], b[4][0], b[5][0] = b[0][5],b[0][4],b[0][3]
            b[0][5],b[0][4],b[0][3] = tmp2

        elif cType == "L":
            tmp = b[5][0], b[4][0], b[3][0]
            b[5][0], b[4][0], b[3][0] = b[5][2],b[5][1],b[5][0]
            b[5][2],b[5][1],b[5][0] = b[3][2],b[4][2],b[5][2]
            b[3][2],b[4][2],b[5][2] = b[3][0],b[3][1],b[3][2]
            b[3][0],b[3][1],b[3][2] = tmp

            tmp2 = b[5][11], b[4][11], b[3][11]
            b[5][11], b[4][11], b[3][11] = b[6][3],b[7][3],b[8][3]
            b[6][3],b[7][3],b[8][3] = b[3][3], b[4][3],b[5][3]
            b[3][3], b[4][3],b[5][3] = b[0][3], b[1][3], b[2][3]
            b[0][3], b[1][3], b[2][3] = tmp2

        elif cType == "R":
            tmp = b[5][6], b[4][6], b[3][6]
            b[5][6], b[4][6], b[3][6] = b[5][8],b[5][7],b[5][6]
            b[5][8],b[5][7],b[5][6] = b[3][8],b[4][8],b[5][8]
            b[3][8],b[4][8],b[5][8] = b[3][6],b[3][7],b[3][8]
            b[3][6],b[3][7],b[3][8] = tmp

            tmp2 = b[5][5], b[4][5], b[3][5]
            b[5][5], b[4][5], b[3][5] = b[8][5],b[7][5],b[6][5]
            b[8][5], b[7][5], b[6][5] = b[3][9], b[4][9], b[5][9]
            b[3][9], b[4][9], b[5][9] = b[2][5], b[1][5], b[0][5]
            b[2][5], b[1][5], b[0][5] = tmp2

        cnt -= 1

    return

for _ in range(t):
    b = [[" "]*12 for _ in range(9)]
    cycleDict = {"U": 0, "D": 1, "F": 2, "B": 3, "L": 4, "R": 5}
    comN = int(input())
    opers = list(map(str, input().split()))

    for i in range(3):
        for j in range(3):
            b[i][3+j] = "w"; b[i+3][j] = "g"; b[i+3][j+3] = "r";
            b[i+3][j+6] = "b"; b[i+3][j+9] = "o"; b[i+6][j+3] = "y"

    for i in range(len(opers)):
        if opers[i][1] == "+":
            move(1,opers[i][0])
        else:
            move(3,opers[i][0])

    result(t)



